-- Roblox é€Ÿåº¦è·³èºæ§åˆ¶å™¨
-- å°‡æ­¤è…³æœ¬æ”¾å…¥ StarterGui æˆ–ä½¿ç”¨åŸ·è¡Œå™¨åŸ·è¡Œ

local Players = game:GetService("Players")
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- è¼‰å…¥ ShiftLock è…³æœ¬
local function loadShiftLock()
    local ref = cloneref or function(x) return x end
    local S = function(n) return ref(game:GetService(n)) end

    local Plrs, Tw, UIS, RS, Wk, CG =
        S("Players"), S("TweenService"), S("UserInputService"), S("RunService"), S("Workspace"), S("CoreGui")

    local plr = Plrs.LocalPlayer

    local function NA(i)
        if not i then return end
        i.Name = "\0"
        i.Archivable = false
    end

    local function parentUI(g)
        if gethui then
            NA(g); g.Parent = gethui(); return g
        elseif CG and CG:FindFirstChild("RobloxGui") then
            NA(g); g.Parent = CG:FindFirstChild("RobloxGui"); return g
        elseif CG then
            NA(g); g.Parent = CG; return g
        elseif plr and plr:FindFirstChildWhichIsA("PlayerGui") then
            NA(g); g.Parent = plr:FindFirstChildWhichIsA("PlayerGui"); g.ResetOnSpawn = false; return g
        end
        return g
    end

    local function getParts()
        local c = plr.Character or plr.CharacterAdded:Wait()
        local hum, hrp
        for _,d in ipairs(c:GetDescendants()) do
            if not hum and d:IsA("Humanoid") then hum = d end
            if not hrp and d:IsA("BasePart") and d.Name == "HumanoidRootPart" then hrp = d end
            if hum and hrp then break end
        end
        hum = hum or c:WaitForChild("Humanoid")
        hrp = hrp or c:WaitForChild("HumanoidRootPart")
        return c, hum, hrp
    end

    local function lockMouse(v)
        if UIS.MouseEnabled then
            UIS.MouseBehavior = v and Enum.MouseBehavior.LockCenter or Enum.MouseBehavior.Default
        end
    end

    local rotCon, oldAR
    local function faceCam(h, hrp, v)
        if rotCon then rotCon:Disconnect() rotCon = nil end
        if v then
            oldAR = h.AutoRotate
            h.AutoRotate = false
            rotCon = RS.RenderStepped:Connect(function()
                local cam = Wk.CurrentCamera
                if not (hrp and cam) then return end
                local lv = cam.CFrame.LookVector
                local flat = Vector3.new(lv.X, 0, lv.Z)
                if flat.Magnitude > 1e-4 then
                    hrp.CFrame = CFrame.lookAt(hrp.Position, hrp.Position + flat.Unit, Vector3.yAxis)
                end
            end)
        else
            if oldAR ~= nil then h.AutoRotate = oldAR end
        end
    end

    local function reapply(v)
        task.defer(function()
            local _, h, r = getParts()
            lockMouse(v)
            faceCam(h, r, v)
        end)
    end

    local gui = Instance.new("ScreenGui")
    gui.Name = "ShiftLockUI"
    gui.ResetOnSpawn = false
    gui.IgnoreGuiInset = true
    gui.ZIndexBehavior = Enum.ZIndexBehavior.Global
    gui.DisplayOrder = 10000
    parentUI(gui)

    local btn = Instance.new("ImageButton")
    btn.Name = "LockBtn"
    btn.AnchorPoint = Vector2.new(0.5, 0.5)
    btn.Size = UDim2.fromOffset(64, 64)
    btn.Position = UDim2.new(1, -30, 1, -30)
    btn.BackgroundColor3 = Color3.fromRGB(34, 34, 38)
    btn.AutoButtonColor = false
    btn.Image = ""
    btn.Active = true
    btn.Parent = gui

    local cr = Instance.new("UICorner")
    cr.CornerRadius = UDim.new(1, 0)
    cr.Parent = btn

    local strk = Instance.new("UIStroke")
    strk.Thickness = 2
    strk.Color = Color3.fromRGB(0, 140, 255)
    strk.Transparency = 0.25
    strk.Parent = btn

    local grd = Instance.new("UIGradient")
    grd.Color = ColorSequence.new{
        ColorSequenceKeypoint.new(0, Color3.fromRGB(45,45,50)),
        ColorSequenceKeypoint.new(1, Color3.fromRGB(27,27,30))
    }
    grd.Rotation = 45
    grd.Parent = btn

    local icn = Instance.new("ImageLabel")
    icn.Name = "Icn"
    icn.BackgroundTransparency = 1
    icn.AnchorPoint = Vector2.new(0.5, 0.5)
    icn.Position = UDim2.fromScale(0.5, 0.5)
    icn.Size = UDim2.fromScale(0.62, 0.62)
    icn.Image = "rbxasset://textures/ui/mouseLock_off.png"
    icn.ImageColor3 = Color3.fromRGB(255,255,255)
    icn.ScaleType = Enum.ScaleType.Fit
    icn.Parent = btn

    local shd = Instance.new("Frame")
    shd.Name = "Shd"
    shd.AnchorPoint = Vector2.new(0.5, 0.5)
    shd.Position = UDim2.new(btn.Position.X.Scale, btn.Position.X.Offset, btn.Position.Y.Scale, btn.Position.Y.Offset + 6)
    shd.Size = UDim2.new(btn.Size.X.Scale, btn.Size.X.Offset + 12, btn.Size.Y.Scale, btn.Size.Y.Offset + 12)
    shd.BackgroundColor3 = Color3.new(0,0,0)
    shd.BackgroundTransparency = 0.8
    shd.ZIndex = 0
    shd.Parent = gui

    local shdC = Instance.new("UICorner")
    shdC.CornerRadius = UDim.new(1, 0)
    shdC.Parent = shd

    local xBtn = Instance.new("TextButton")
    xBtn.Name = "Close"
    xBtn.AnchorPoint = Vector2.new(1, 0)
    xBtn.Position = UDim2.new(1, 6, 0, -6)
    xBtn.Size = UDim2.fromOffset(22, 22)
    xBtn.BackgroundColor3 = Color3.fromRGB(230, 60, 60)
    xBtn.AutoButtonColor = true
    xBtn.Text = "Ã—"
    xBtn.TextScaled = true
    xBtn.TextColor3 = Color3.new(1,1,1)
    xBtn.Parent = btn

    local xC = Instance.new("UICorner")
    xC.CornerRadius = UDim.new(1,0)
    xC.Parent = xBtn

    local xS = Instance.new("UIStroke")
    xS.Thickness = 1
    xS.Transparency = 0.3
    xS.Parent = xBtn

    local sc = Instance.new("UIScale")
    sc.Scale = 0.9
    sc.Parent = btn
    Tw:Create(sc, TweenInfo.new(0.22, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {Scale = 1}):Play()

    local tH = TweenInfo.new(0.15, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
    local tP = TweenInfo.new(0.08, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
    local tT = TweenInfo.new(0.18, Enum.EasingStyle.Sine, Enum.EasingDirection.Out)
    local tLoop = TweenInfo.new(1.2, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut, -1, true, 0)

    Tw:Create(strk, tLoop, {Transparency = 0.4}):Play()

    local over = false
    btn.MouseEnter:Connect(function()
        over = true
        Tw:Create(btn, tH, {Size = UDim2.fromOffset(70, 70)}):Play()
    end)
    btn.MouseLeave:Connect(function()
        over = false
        Tw:Create(btn, tH, {Size = UDim2.fromOffset(64, 64)}):Play()
    end)

    local function pulse()
        local p = Instance.new("Frame")
        p.Name = "Pulse"
        p.AnchorPoint = Vector2.new(0.5,0.5)
        p.Position = UDim2.fromScale(0.5,0.5)
        p.Size = UDim2.fromOffset(0,0)
        p.BackgroundColor3 = Color3.new(1,1,1)
        p.BackgroundTransparency = 0.65
        p.ZIndex = btn.ZIndex + 1
        local pc = Instance.new("UICorner"); pc.CornerRadius = UDim.new(1,0); pc.Parent = p
        p.Parent = btn
        local m = math.max(btn.AbsoluteSize.X, btn.AbsoluteSize.Y) * 1.15
        Tw:Create(p, TweenInfo.new(0.22, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {Size = UDim2.fromOffset(m,m), BackgroundTransparency = 1}):Play()
        task.delay(0.24, function() p:Destroy() end)
    end

    btn.MouseButton1Down:Connect(function()
        Tw:Create(btn, tP, {Size = UDim2.fromOffset(58,58)}):Play()
        Tw:Create(strk, tP, {Thickness = 3, Transparency = 0.1}):Play()
        pulse()
    end)
    btn.MouseButton1Up:Connect(function()
        Tw:Create(btn, tP, {Size = over and UDim2.fromOffset(70,70) or UDim2.fromOffset(64,64)}):Play()
        Tw:Create(strk, tP, {Thickness = 2, Transparency = 0.25}):Play()
    end)

    local function shn()
        local s = Instance.new("Frame")
        s.Name = "Shn"
        s.BackgroundTransparency = 1
        s.Size = UDim2.fromScale(1,1)
        s.ClipsDescendants = true
        s.Parent = btn

        local b = Instance.new("Frame")
        b.AnchorPoint = Vector2.new(0.5,0.5)
        b.Position = UDim2.fromScale(-0.2, 0.5)
        b.Size = UDim2.new(0, 10, 1.4, 0)
        b.BackgroundColor3 = Color3.fromRGB(255,255,255)
        b.BackgroundTransparency = 0.85
        local g = Instance.new("UIGradient")
        g.Transparency = NumberSequence.new{
            NumberSequenceKeypoint.new(0, 1),
            NumberSequenceKeypoint.new(0.5, 0.5),
            NumberSequenceKeypoint.new(1, 1)
        }
        g.Rotation = 20
        g.Parent = b
        b.Parent = s

        local tw = Tw:Create(b, TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {Position = UDim2.fromScale(1.2, 0.5)})
        tw:Play()
        tw.Completed:Connect(function() s:Destroy() end)
    end

    local drag = false
    local dStart, pStart

    local function clampUD(pos)
        local scr = gui.AbsoluteSize
        local half = btn.AbsoluteSize/2
        local absX = pos.X.Scale * scr.X + pos.X.Offset
        local absY = pos.Y.Scale * scr.Y + pos.Y.Offset
        local x = math.clamp(absX, half.X + 8, scr.X - half.X - 8)
        local y = math.clamp(absY, half.Y + 8, scr.Y - half.Y - 8)
        return UDim2.new(pos.X.Scale, x - pos.X.Scale * scr.X, pos.Y.Scale, y - pos.Y.Scale * scr.Y)
    end

    btn.InputBegan:Connect(function(i)
        if i.UserInputType == Enum.UserInputType.MouseButton1 or i.UserInputType == Enum.UserInputType.Touch then
            drag = true
            dStart = i.Position
            pStart = btn.Position
            i.Changed:Connect(function()
                if i.UserInputState == Enum.UserInputState.End then
                    drag = false
                end
            end)
        end
    end)

    btn.InputChanged:Connect(function(i)
        if i.UserInputType == Enum.UserInputType.MouseMovement or i.UserInputType == Enum.UserInputType.Touch then
            if drag and dStart and pStart then
                local d = i.Position - dStart
                local np = UDim2.new(pStart.X.Scale, pStart.X.Offset + d.X, pStart.Y.Scale, pStart.Y.Offset + d.Y)
                btn.Position = clampUD(np)
            end
        end
    end)

    RS.RenderStepped:Connect(function()
        shd.Position = UDim2.new(btn.Position.X.Scale, btn.Position.X.Offset, btn.Position.Y.Scale, btn.Position.Y.Offset + 6)
        shd.Size = UDim2.new(btn.Size.X.Scale, btn.Size.X.Offset + 12, btn.Size.Y.Scale, btn.Size.Y.Offset + 12)
    end)

    local on = false
    local icOn, icOff = "rbxasset://textures/ui/mouseLock_on.png", "rbxasset://textures/ui/mouseLock_off.png"

    local function apply(v)
        local _, h, r = getParts()
        on = v
        lockMouse(v)
        faceCam(h, r, v)
        Tw:Create(strk, tT, {Color = v and Color3.fromRGB(0, 200, 255) or Color3.fromRGB(0, 140, 255), Thickness = v and 3 or 2}):Play()
        Tw:Create(btn, tT, {BackgroundColor3 = v and Color3.fromRGB(38, 48, 60) or Color3.fromRGB(34, 34, 38)}):Play()
        Tw:Create(icn, tT, {ImageColor3 = v and Color3.fromRGB(0, 200, 255) or Color3.fromRGB(255,255,255)}):Play()
        icn.Image = v and icOn or icOff
        shn()
    end

    btn.Activated:Connect(function()
        apply(not on)
    end)

    xBtn.Activated:Connect(function()
        if on then apply(false) end
        Tw:Create(sc, TweenInfo.new(0.18, Enum.EasingStyle.Back, Enum.EasingDirection.In), {Scale = 0.8}):Play()
        Tw:Create(btn, TweenInfo.new(0.18, Enum.EasingStyle.Sine, Enum.EasingDirection.In), {BackgroundTransparency = 1}):Play()
        Tw:Create(strk, TweenInfo.new(0.12), {Transparency = 1}):Play()
        task.delay(0.2, function() gui:Destroy() end)
    end)

    plr.CharacterAdded:Connect(function()
        reapply(on)
    end)

    local lastCam = Wk.CurrentCamera
    Wk:GetPropertyChangedSignal("CurrentCamera"):Connect(function()
        local c = Wk.CurrentCamera
        if c ~= lastCam then
            lastCam = c
            reapply(on)
        end
    end)

    -- è‡ªå‹•å•Ÿå‹• ShiftLock
    task.wait(0.5)
    apply(true)
    
    print("ShiftLock å·²è¼‰å…¥ä¸¦è‡ªå‹•å•Ÿå‹•!")
end

-- è¼‰å…¥ ShiftLock
pcall(loadShiftLock)

-- å‰µå»º GUI (ç§»åˆ° ShiftLock ä¹‹å¾Œ)
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "SpeedJumpController"
screenGui.ResetOnSpawn = false
screenGui.IgnoreGuiInset = true
screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Global
screenGui.DisplayOrder = 10001

-- å˜—è©¦ä½¿ç”¨èˆ‡ ShiftLock ç›¸åŒçš„ parent æ–¹æ³•
local function parentUI(g)
    if gethui then
        g.Name = "\0"
        g.Archivable = false
        g.Parent = gethui()
        return g
    elseif game:GetService("CoreGui") and game:GetService("CoreGui"):FindFirstChild("RobloxGui") then
        g.Name = "\0"
        g.Archivable = false
        g.Parent = game:GetService("CoreGui"):FindFirstChild("RobloxGui")
        return g
    elseif game:GetService("CoreGui") then
        g.Name = "\0"
        g.Archivable = false
        g.Parent = game:GetService("CoreGui")
        return g
    else
        g.Parent = playerGui
        return g
    end
end

parentUI(screenGui)

local originalSpeed = 16
local originalJump = 50
local originalCamDistance = 12.5

-- æ¨™è¨˜æ˜¯å¦å·²ç¶“ä¿å­˜éåŸå§‹å€¼
local hasOriginalValues = false

-- ç²å–åŸå§‹æ•¸å€¼ (åªåœ¨æ‰€æœ‰åŠŸèƒ½éƒ½æœªå•Ÿå‹•æ™‚æ‰ç²å–)
local function getOriginalValues()
    -- åªæœ‰ç•¶æ‰€æœ‰åŠŸèƒ½éƒ½æœªå•Ÿå‹•æ™‚æ‰ç²å–åŸå§‹å€¼
    if speedActive or jumpActive or camActive then
        return
    end
    
    local character = player.Character
    if character then
        local humanoid = character:FindFirstChildOfClass("Humanoid")
        if humanoid then
            originalSpeed = humanoid.WalkSpeed
            
            -- å„ªå…ˆä½¿ç”¨ JumpHeight (æ–°ç‰ˆ)ï¼Œå¦‚æœä¸å­˜åœ¨å‰‡ä½¿ç”¨ JumpPower (èˆŠç‰ˆ)
            if humanoid.UseJumpPower then
                originalJump = humanoid.JumpPower
            else
                originalJump = humanoid.JumpHeight
            end
        end
    end
    
    originalCamDistance = player.CameraMaxZoomDistance
    hasOriginalValues = true
end

-- å‰µå»º GUI
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "SpeedJumpController"
screenGui.ResetOnSpawn = false
screenGui.IgnoreGuiInset = true
screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Global
screenGui.DisplayOrder = 10001
screenGui.Parent = playerGui

-- ä¸»æ¡†æ¶
local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 400, 0, 310)
mainFrame.Position = UDim2.new(0.5, -200, 0.6, -155)
mainFrame.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
mainFrame.BorderSizePixel = 0
mainFrame.Parent = screenGui

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 15)
corner.Parent = mainFrame

-- æ¨™é¡Œæ¬„
local titleBar = Instance.new("Frame")
titleBar.Size = UDim2.new(1, 0, 0, 50)
titleBar.BackgroundColor3 = Color3.fromRGB(102, 126, 234)
titleBar.BorderSizePixel = 0
titleBar.Parent = mainFrame

local titleBarCorner = Instance.new("UICorner")
titleBarCorner.CornerRadius = UDim.new(0, 15)
titleBarCorner.Parent = titleBar

local titleBarBottom = Instance.new("Frame")
titleBarBottom.Size = UDim2.new(1, 0, 0, 15)
titleBarBottom.Position = UDim2.new(0, 0, 1, -15)
titleBarBottom.BackgroundColor3 = Color3.fromRGB(102, 126, 234)
titleBarBottom.BorderSizePixel = 0
titleBarBottom.Parent = titleBar

-- æ¨™é¡Œ
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, -100, 1, 0)
title.BackgroundTransparency = 1
title.Text = "ğŸ® é€Ÿåº¦è·³èºæ§åˆ¶å™¨"
title.TextSize = 20
title.Font = Enum.Font.GothamBold
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.Parent = titleBar

-- ç¸®å°æŒ‰éˆ•
local minimizeButton = Instance.new("TextButton")
minimizeButton.Size = UDim2.new(0, 40, 0, 40)
minimizeButton.Position = UDim2.new(1, -90, 0, 5)
minimizeButton.BackgroundColor3 = Color3.fromRGB(158, 158, 158)
minimizeButton.BorderSizePixel = 0
minimizeButton.Text = "â”€"
minimizeButton.TextSize = 20
minimizeButton.Font = Enum.Font.GothamBold
minimizeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
minimizeButton.Parent = titleBar

local minimizeCorner = Instance.new("UICorner")
minimizeCorner.CornerRadius = UDim.new(0, 8)
minimizeCorner.Parent = minimizeButton

-- é—œé–‰æŒ‰éˆ•
local closeButton = Instance.new("TextButton")
closeButton.Size = UDim2.new(0, 40, 0, 40)
closeButton.Position = UDim2.new(1, -45, 0, 5)
closeButton.BackgroundColor3 = Color3.fromRGB(244, 67, 54)
closeButton.BorderSizePixel = 0
closeButton.Text = "X"
closeButton.TextSize = 20
closeButton.Font = Enum.Font.GothamBold
closeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
closeButton.Parent = titleBar

local closeCorner = Instance.new("UICorner")
closeCorner.CornerRadius = UDim.new(0, 8)
closeCorner.Parent = closeButton

-- é€Ÿåº¦æ§åˆ¶è¡Œ
local speedFrame = Instance.new("Frame")
speedFrame.Size = UDim2.new(0.9, 0, 0, 50)
speedFrame.Position = UDim2.new(0.05, 0, 0, 70)
speedFrame.BackgroundColor3 = Color3.fromRGB(248, 249, 250)
speedFrame.BorderSizePixel = 0
speedFrame.Parent = mainFrame

local speedCorner = Instance.new("UICorner")
speedCorner.CornerRadius = UDim.new(0, 10)
speedCorner.Parent = speedFrame

local speedLabel = Instance.new("TextLabel")
speedLabel.Size = UDim2.new(0, 70, 1, 0)
speedLabel.Position = UDim2.new(0, 10, 0, 0)
speedLabel.BackgroundTransparency = 1
speedLabel.Text = "é€Ÿåº¦:"
speedLabel.TextSize = 18
speedLabel.Font = Enum.Font.GothamBold
speedLabel.TextColor3 = Color3.fromRGB(85, 85, 85)
speedLabel.TextXAlignment = Enum.TextXAlignment.Left
speedLabel.Parent = speedFrame

local speedInput = Instance.new("TextBox")
speedInput.Size = UDim2.new(0, 120, 0, 35)
speedInput.Position = UDim2.new(0, 85, 0, 7.5)
speedInput.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
speedInput.BorderColor3 = Color3.fromRGB(221, 221, 221)
speedInput.BorderSizePixel = 2
speedInput.Text = "70"
speedInput.TextSize = 16
speedInput.Font = Enum.Font.Gotham
speedInput.TextColor3 = Color3.fromRGB(50, 50, 50)
speedInput.PlaceholderText = "è¼¸å…¥é€Ÿåº¦"
speedInput.Parent = speedFrame

local speedInputCorner = Instance.new("UICorner")
speedInputCorner.CornerRadius = UDim.new(0, 8)
speedInputCorner.Parent = speedInput

local speedButton = Instance.new("TextButton")
speedButton.Size = UDim2.new(0, 90, 0, 35)
speedButton.Position = UDim2.new(1, -100, 0, 7.5)
speedButton.BackgroundColor3 = Color3.fromRGB(76, 175, 80)
speedButton.BorderSizePixel = 0
speedButton.Text = "å•Ÿå‹•"
speedButton.TextSize = 16
speedButton.Font = Enum.Font.GothamBold
speedButton.TextColor3 = Color3.fromRGB(255, 255, 255)
speedButton.Parent = speedFrame

local speedBtnCorner = Instance.new("UICorner")
speedBtnCorner.CornerRadius = UDim.new(0, 8)
speedBtnCorner.Parent = speedButton

-- è·³èºæ§åˆ¶è¡Œ
local jumpFrame = Instance.new("Frame")
jumpFrame.Size = UDim2.new(0.9, 0, 0, 50)
jumpFrame.Position = UDim2.new(0.05, 0, 0, 135)
jumpFrame.BackgroundColor3 = Color3.fromRGB(248, 249, 250)
jumpFrame.BorderSizePixel = 0
jumpFrame.Parent = mainFrame

local jumpCorner = Instance.new("UICorner")
jumpCorner.CornerRadius = UDim.new(0, 10)
jumpCorner.Parent = jumpFrame

local jumpLabel = Instance.new("TextLabel")
jumpLabel.Size = UDim2.new(0, 70, 1, 0)
jumpLabel.Position = UDim2.new(0, 10, 0, 0)
jumpLabel.BackgroundTransparency = 1
jumpLabel.Text = "è·³èº:"
jumpLabel.TextSize = 18
jumpLabel.Font = Enum.Font.GothamBold
jumpLabel.TextColor3 = Color3.fromRGB(85, 85, 85)
jumpLabel.TextXAlignment = Enum.TextXAlignment.Left
jumpLabel.Parent = jumpFrame

local jumpInput = Instance.new("TextBox")
jumpInput.Size = UDim2.new(0, 120, 0, 35)
jumpInput.Position = UDim2.new(0, 85, 0, 7.5)
jumpInput.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
jumpInput.BorderColor3 = Color3.fromRGB(221, 221, 221)
jumpInput.BorderSizePixel = 2
jumpInput.Text = "75"
jumpInput.TextSize = 16
jumpInput.Font = Enum.Font.Gotham
jumpInput.TextColor3 = Color3.fromRGB(50, 50, 50)
jumpInput.PlaceholderText = "è¼¸å…¥è·³èºåŠ›"
jumpInput.Parent = jumpFrame

local jumpInputCorner = Instance.new("UICorner")
jumpInputCorner.CornerRadius = UDim.new(0, 8)
jumpInputCorner.Parent = jumpInput

local jumpButton = Instance.new("TextButton")
jumpButton.Size = UDim2.new(0, 90, 0, 35)
jumpButton.Position = UDim2.new(1, -100, 0, 7.5)
jumpButton.BackgroundColor3 = Color3.fromRGB(76, 175, 80)
jumpButton.BorderSizePixel = 0
jumpButton.Text = "å•Ÿå‹•"
jumpButton.TextSize = 16
jumpButton.Font = Enum.Font.GothamBold
jumpButton.TextColor3 = Color3.fromRGB(255, 255, 255)
jumpButton.Parent = jumpFrame

local jumpBtnCorner = Instance.new("UICorner")
jumpBtnCorner.CornerRadius = UDim.new(0, 8)
jumpBtnCorner.Parent = jumpButton

-- é¡é ­è·é›¢æ§åˆ¶è¡Œ
local camFrame = Instance.new("Frame")
camFrame.Size = UDim2.new(0.9, 0, 0, 50)
camFrame.Position = UDim2.new(0.05, 0, 0, 200)
camFrame.BackgroundColor3 = Color3.fromRGB(248, 249, 250)
camFrame.BorderSizePixel = 0
camFrame.Parent = mainFrame

local camCorner = Instance.new("UICorner")
camCorner.CornerRadius = UDim.new(0, 10)
camCorner.Parent = camFrame

local camLabel = Instance.new("TextLabel")
camLabel.Size = UDim2.new(0, 70, 1, 0)
camLabel.Position = UDim2.new(0, 10, 0, 0)
camLabel.BackgroundTransparency = 1
camLabel.Text = "é¡é ­:"
camLabel.TextSize = 18
camLabel.Font = Enum.Font.GothamBold
camLabel.TextColor3 = Color3.fromRGB(85, 85, 85)
camLabel.TextXAlignment = Enum.TextXAlignment.Left
camLabel.Parent = camFrame

local camInput = Instance.new("TextBox")
camInput.Size = UDim2.new(0, 120, 0, 35)
camInput.Position = UDim2.new(0, 85, 0, 7.5)
camInput.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
camInput.BorderColor3 = Color3.fromRGB(221, 221, 221)
camInput.BorderSizePixel = 2
camInput.Text = "120"
camInput.TextSize = 16
camInput.Font = Enum.Font.Gotham
camInput.TextColor3 = Color3.fromRGB(50, 50, 50)
camInput.PlaceholderText = "è¼¸å…¥é¡é ­è·é›¢"
camInput.Parent = camFrame

local camInputCorner = Instance.new("UICorner")
camInputCorner.CornerRadius = UDim.new(0, 8)
camInputCorner.Parent = camInput

local camButton = Instance.new("TextButton")
camButton.Size = UDim2.new(0, 90, 0, 35)
camButton.Position = UDim2.new(1, -100, 0, 7.5)
camButton.BackgroundColor3 = Color3.fromRGB(76, 175, 80)
camButton.BorderSizePixel = 0
camButton.Text = "å•Ÿå‹•"
camButton.TextSize = 16
camButton.Font = Enum.Font.GothamBold
camButton.TextColor3 = Color3.fromRGB(255, 255, 255)
camButton.Parent = camFrame

local camBtnCorner = Instance.new("UICorner")
camBtnCorner.CornerRadius = UDim.new(0, 8)
camBtnCorner.Parent = camButton

-- ç‹€æ…‹é¡¯ç¤º
local statusLabel = Instance.new("TextLabel")
statusLabel.Size = UDim2.new(0.9, 0, 0, 40)
statusLabel.Position = UDim2.new(0.05, 0, 1, -50)
statusLabel.BackgroundColor3 = Color3.fromRGB(255, 235, 238)
statusLabel.BorderSizePixel = 0
statusLabel.Text = "ç³»çµ±æœªå•Ÿå‹•"
statusLabel.TextSize = 14
statusLabel.Font = Enum.Font.GothamBold
statusLabel.TextColor3 = Color3.fromRGB(198, 40, 40)
statusLabel.Parent = mainFrame

local statusCorner = Instance.new("UICorner")
statusCorner.CornerRadius = UDim.new(0, 8)
statusCorner.Parent = statusLabel

-- ç¸®å°å¾Œçš„å°è¦–çª—
local miniFrame = Instance.new("Frame")
miniFrame.Size = UDim2.new(0, 200, 0, 50)
miniFrame.Position = UDim2.new(0.5, -100, 0, 30)
miniFrame.BackgroundColor3 = Color3.fromRGB(102, 126, 234)
miniFrame.BorderSizePixel = 0
miniFrame.Visible = false
miniFrame.Parent = screenGui

local miniCorner = Instance.new("UICorner")
miniCorner.CornerRadius = UDim.new(0, 10)
miniCorner.Parent = miniFrame

local miniTitle = Instance.new("TextLabel")
miniTitle.Size = UDim2.new(1, -50, 1, 0)
miniTitle.BackgroundTransparency = 1
miniTitle.Text = "ğŸ® æ§åˆ¶å™¨"
miniTitle.TextSize = 18
miniTitle.Font = Enum.Font.GothamBold
miniTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
miniTitle.Parent = miniFrame

local expandButton = Instance.new("TextButton")
expandButton.Size = UDim2.new(0, 40, 0, 40)
expandButton.Position = UDim2.new(1, -45, 0, 5)
expandButton.BackgroundColor3 = Color3.fromRGB(76, 175, 80)
expandButton.BorderSizePixel = 0
expandButton.Text = "+"
expandButton.TextSize = 24
expandButton.Font = Enum.Font.GothamBold
expandButton.TextColor3 = Color3.fromRGB(255, 255, 255)
expandButton.Parent = miniFrame

local expandCorner = Instance.new("UICorner")
expandCorner.CornerRadius = UDim.new(0, 8)
expandCorner.Parent = expandButton

-- è®Šæ•¸
local speedActive = false
local jumpActive = false
local camActive = false
local speedValue = 70
local jumpValue = 75
local camValue = 120
local speedConnection = nil
local jumpConnection = nil
local camConnection = nil

-- ç²å–åˆå§‹å€¼ (ç­‰å¾…è§’è‰²è¼‰å…¥å¾Œå†ç²å–)
task.spawn(function()
    if player.Character then
        task.wait(0.1) -- ç­‰å¾…éŠæˆ²è¨­å®šåˆå§‹å€¼
        getOriginalValues()
    end
end)

-- æ›´æ–°ç‹€æ…‹å‡½æ•¸
local function updateStatus()
    local statusParts = {}
    
    if speedActive then
        table.insert(statusParts, string.format("é€Ÿåº¦:%d", speedValue))
    end
    if jumpActive then
        table.insert(statusParts, string.format("è·³èº:%d", jumpValue))
    end
    if camActive then
        table.insert(statusParts, string.format("é¡é ­:%d", camValue))
    end
    
    if #statusParts > 0 then
        statusLabel.Text = "âœ… " .. table.concat(statusParts, " | ") .. " - å·²å•Ÿå‹•"
        statusLabel.BackgroundColor3 = Color3.fromRGB(232, 245, 233)
        statusLabel.TextColor3 = Color3.fromRGB(46, 125, 50)
    else
        statusLabel.Text = "ç³»çµ±æœªå•Ÿå‹•"
        statusLabel.BackgroundColor3 = Color3.fromRGB(255, 235, 238)
        statusLabel.TextColor3 = Color3.fromRGB(198, 40, 40)
    end
end

-- é€Ÿåº¦æ§åˆ¶
speedButton.MouseButton1Click:Connect(function()
    local character = player.Character
    if not character then return end
    local humanoid = character:FindFirstChildOfClass("Humanoid")
    if not humanoid then return end
    
    if not speedActive then
        -- åœ¨å•Ÿå‹•å‰ç¢ºä¿æœ‰åŸå§‹å€¼
        if not hasOriginalValues then
            getOriginalValues()
        end
        
        -- å•Ÿå‹•
        speedValue = tonumber(speedInput.Text) or 70
        speedActive = true
        speedButton.Text = "è§£é™¤"
        speedButton.BackgroundColor3 = Color3.fromRGB(244, 67, 54)
        speedInput.TextEditable = false
        speedInput.BackgroundColor3 = Color3.fromRGB(233, 236, 239)
        speedFrame.BackgroundColor3 = Color3.fromRGB(227, 242, 253)
        
        -- è¨­å®šé€Ÿåº¦
        humanoid.WalkSpeed = speedValue
        
        -- ç›£è½ä¸¦é–å®šé€Ÿåº¦
        if speedConnection then
            speedConnection:Disconnect()
        end
        speedConnection = humanoid:GetPropertyChangedSignal("WalkSpeed"):Connect(function()
            if speedActive then
                humanoid.WalkSpeed = speedValue
            end
        end)
    else
        -- è§£é™¤
        speedActive = false
        speedButton.Text = "å•Ÿå‹•"
        speedButton.BackgroundColor3 = Color3.fromRGB(76, 175, 80)
        speedInput.TextEditable = true
        speedInput.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
        speedFrame.BackgroundColor3 = Color3.fromRGB(248, 249, 250)
        
        -- æ¢å¾©åŸå§‹é€Ÿåº¦
        humanoid.WalkSpeed = originalSpeed
        
        -- æ–·é–‹é€£æ¥
        if speedConnection then
            speedConnection:Disconnect()
            speedConnection = nil
        end
    end
    
    updateStatus()
end)

-- é¡é ­è·é›¢æ§åˆ¶
camButton.MouseButton1Click:Connect(function()
    if not camActive then
        -- åœ¨å•Ÿå‹•å‰ç¢ºä¿æœ‰åŸå§‹å€¼
        if not hasOriginalValues then
            getOriginalValues()
        end
        
        -- å•Ÿå‹•
        camValue = tonumber(camInput.Text) or 120
        camActive = true
        camButton.Text = "è§£é™¤"
        camButton.BackgroundColor3 = Color3.fromRGB(244, 67, 54)
        camInput.TextEditable = false
        camInput.BackgroundColor3 = Color3.fromRGB(233, 236, 239)
        camFrame.BackgroundColor3 = Color3.fromRGB(227, 242, 253)
        
        -- è¨­å®šé¡é ­æœ€å¤§è·é›¢
        player.CameraMaxZoomDistance = camValue
        player.CameraMinZoomDistance = 0.5
        
        -- ä½¿ç”¨ RunService ä¾†å¹³æ»‘åœ°æ‹‰é é¡é ­
        local camera = workspace.CurrentCamera
        local character = player.Character
        
        if character and character:FindFirstChild("HumanoidRootPart") then
            local humanoidRootPart = character.HumanoidRootPart
            
            -- ç­‰å¾…ä¸€å¹€ç¢ºä¿è¨­å®šç”Ÿæ•ˆ
            task.wait()
            
            -- ç²å–ç•¶å‰é¡é ­ç›¸å°ç©å®¶çš„æ–¹å‘å’Œè·é›¢
            local currentOffset = camera.CFrame.Position - humanoidRootPart.Position
            local currentDirection = currentOffset.Unit
            local currentDistance = currentOffset.Magnitude
            
            -- è¨ˆç®—æ–°çš„é¡é ­ä½ç½®
            local newPosition = humanoidRootPart.Position + currentDirection * camValue
            
            -- è¨­å®šæ–°çš„é¡é ­ä½ç½®,ä¿æŒçœ‹å‘ç©å®¶
            camera.CFrame = CFrame.new(newPosition, humanoidRootPart.Position)
            
            print(string.format("é¡é ­å¾è·é›¢ %.1f æ‹‰é åˆ° %.1f", currentDistance, camValue))
        end
        
        -- åªç›£æ§æœ€å¤§è·é›¢è¨­å®š,ä¸é–å®šå¯¦éš›è·é›¢
        if camConnection then
            camConnection:Disconnect()
        end
        
        camConnection = player:GetPropertyChangedSignal("CameraMaxZoomDistance"):Connect(function()
            if camActive and player.CameraMaxZoomDistance ~= camValue then
                player.CameraMaxZoomDistance = camValue
            end
        end)
    else
        -- è§£é™¤
        camActive = false
        camButton.Text = "å•Ÿå‹•"
        camButton.BackgroundColor3 = Color3.fromRGB(76, 175, 80)
        camInput.TextEditable = true
        camInput.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
        camFrame.BackgroundColor3 = Color3.fromRGB(248, 249, 250)
        
        -- æ¢å¾©åŸå§‹é¡é ­è·é›¢
        player.CameraMaxZoomDistance = originalCamDistance
        
        -- æ–·é–‹é€£æ¥
        if camConnection then
            camConnection:Disconnect()
            camConnection = nil
        end
    end
    
    updateStatus()
end)

-- è·³èºæ§åˆ¶
jumpButton.MouseButton1Click:Connect(function()
    local character = player.Character
    if not character then return end
    local humanoid = character:FindFirstChildOfClass("Humanoid")
    if not humanoid then return end
    
    if not jumpActive then
        -- åœ¨å•Ÿå‹•å‰ç¢ºä¿æœ‰åŸå§‹å€¼
        if not hasOriginalValues then
            getOriginalValues()
        end
        
        -- å•Ÿå‹•
        jumpValue = tonumber(jumpInput.Text) or 75
        jumpActive = true
        jumpButton.Text = "è§£é™¤"
        jumpButton.BackgroundColor3 = Color3.fromRGB(244, 67, 54)
        jumpInput.TextEditable = false
        jumpInput.BackgroundColor3 = Color3.fromRGB(233, 236, 239)
        jumpFrame.BackgroundColor3 = Color3.fromRGB(227, 242, 253)
        
        -- åˆ¤æ–·ä½¿ç”¨å“ªç¨®è·³èºç³»çµ±ä¸¦è¨­å®š
        if humanoid.UseJumpPower then
            -- èˆŠç‰ˆè·³èºç³»çµ± (JumpPower)
            humanoid.JumpPower = jumpValue
            
            if jumpConnection then
                jumpConnection:Disconnect()
            end
            jumpConnection = humanoid:GetPropertyChangedSignal("JumpPower"):Connect(function()
                if jumpActive then
                    humanoid.JumpPower = jumpValue
                end
            end)
        else
            -- æ–°ç‰ˆè·³èºç³»çµ± (JumpHeight)
            humanoid.JumpHeight = jumpValue
            
            if jumpConnection then
                jumpConnection:Disconnect()
            end
            jumpConnection = humanoid:GetPropertyChangedSignal("JumpHeight"):Connect(function()
                if jumpActive then
                    humanoid.JumpHeight = jumpValue
                end
            end)
        end
    else
        -- è§£é™¤
        jumpActive = false
        jumpButton.Text = "å•Ÿå‹•"
        jumpButton.BackgroundColor3 = Color3.fromRGB(76, 175, 80)
        jumpInput.TextEditable = true
        jumpInput.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
        jumpFrame.BackgroundColor3 = Color3.fromRGB(248, 249, 250)
        
        -- æ¢å¾©åŸå§‹è·³èºåŠ›
        if humanoid.UseJumpPower then
            humanoid.JumpPower = originalJump
        else
            humanoid.JumpHeight = originalJump
        end
        
        -- æ–·é–‹é€£æ¥
        if jumpConnection then
            jumpConnection:Disconnect()
            jumpConnection = nil
        end
    end
    
    updateStatus()
end)

-- ç¸®å°æŒ‰éˆ•
minimizeButton.MouseButton1Click:Connect(function()
    mainFrame.Visible = false
    miniFrame.Visible = true
end)

-- å±•é–‹æŒ‰éˆ•
expandButton.MouseButton1Click:Connect(function()
    miniFrame.Visible = false
    mainFrame.Visible = true
end)

-- é—œé–‰æŒ‰éˆ•
closeButton.MouseButton1Click:Connect(function()
    -- å…ˆè§£é™¤æ‰€æœ‰å•Ÿå‹•çš„åŠŸèƒ½
    local character = player.Character
    if character then
        local humanoid = character:FindFirstChildOfClass("Humanoid")
        if humanoid then
            if speedActive then
                humanoid.WalkSpeed = originalSpeed
            end
            if jumpActive then
                if humanoid.UseJumpPower then
                    humanoid.JumpPower = originalJump
                else
                    humanoid.JumpHeight = originalJump
                end
            end
        end
    end
    
    if camActive then
        player.CameraMaxZoomDistance = originalCamDistance
    end
    
    -- æ–·é–‹æ‰€æœ‰é€£æ¥
    if speedConnection then
        speedConnection:Disconnect()
    end
    if jumpConnection then
        jumpConnection:Disconnect()
    end
    if camConnection then
        camConnection:Disconnect()
    end
    
    -- åˆªé™¤ GUI
    screenGui:Destroy()
end)

-- ç•¶è§’è‰²é‡ç”Ÿæ™‚é‡æ–°æ‡‰ç”¨è¨­å®šå’Œç²å–æ–°çš„åŸå§‹å€¼
player.CharacterAdded:Connect(function(character)
    local humanoid = character:WaitForChild("Humanoid")
    
    -- é‡ç½®åŸå§‹å€¼æ¨™è¨˜,ç­‰å¾…æ–°è§’è‰²çš„åˆå§‹å€¼è¨­å®šå®Œæˆ
    hasOriginalValues = false
    
    -- ç­‰å¾…ä¸€å°æ®µæ™‚é–“è®“éŠæˆ²è¨­å®šåŸå§‹å€¼
    wait(0.1)
    
    -- å¦‚æœæ‰€æœ‰åŠŸèƒ½éƒ½æœªå•Ÿå‹•,ç²å–æ–°çš„åŸå§‹å€¼
    if not speedActive and not jumpActive and not camActive then
        getOriginalValues()
    end
    
    if speedActive then
        humanoid.WalkSpeed = speedValue
        if speedConnection then
            speedConnection:Disconnect()
        end
        speedConnection = humanoid:GetPropertyChangedSignal("WalkSpeed"):Connect(function()
            if speedActive then
                humanoid.WalkSpeed = speedValue
            end
        end)
    end
    
    if jumpActive then
        if humanoid.UseJumpPower then
            humanoid.JumpPower = jumpValue
            if jumpConnection then
                jumpConnection:Disconnect()
            end
            jumpConnection = humanoid:GetPropertyChangedSignal("JumpPower"):Connect(function()
                if jumpActive then
                    humanoid.JumpPower = jumpValue
                end
            end)
        else
            humanoid.JumpHeight = jumpValue
            if jumpConnection then
                jumpConnection:Disconnect()
            end
            jumpConnection = humanoid:GetPropertyChangedSignal("JumpHeight"):Connect(function()
                if jumpActive then
                    humanoid.JumpHeight = jumpValue
                end
            end)
        end
    end
    
    if camActive then
        player.CameraMaxZoomDistance = camValue
        if camConnection then
            camConnection:Disconnect()
        end
        
        camConnection = player:GetPropertyChangedSignal("CameraMaxZoomDistance"):Connect(function()
            if camActive and player.CameraMaxZoomDistance ~= camValue then
                player.CameraMaxZoomDistance = camValue
            end
        end)
    end
end)

-- ä½¿ä¸»è¦–çª—å¯æ‹–å‹•
local dragging
local dragInput
local dragStart
local startPos

local function update(input)
    local delta = input.Position - dragStart
    mainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
end

titleBar.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = true
        dragStart = input.Position
        startPos = mainFrame.Position
        
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

titleBar.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
        dragInput = input
    end
end)

game:GetService("UserInputService").InputChanged:Connect(function(input)
    if input == dragInput and dragging then
        update(input)
    end
end)

-- ä½¿ç¸®å°è¦–çª—å¯æ‹–å‹•
local miniDragging
local miniDragInput
local miniDragStart
local miniStartPos

local function updateMini(input)
    local delta = input.Position - miniDragStart
    miniFrame.Position = UDim2.new(miniStartPos.X.Scale, miniStartPos.X.Offset + delta.X, miniStartPos.Y.Scale, miniStartPos.Y.Offset + delta.Y)
end

miniFrame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        miniDragging = true
        miniDragStart = input.Position
        miniStartPos = miniFrame.Position
        
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                miniDragging = false
            end
        end)
    end
end)

miniFrame.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
        miniDragInput = input
    end
end)

game:GetService("UserInputService").InputChanged:Connect(function(input)
    if input == miniDragInput and miniDragging then
        updateMini(input)
    end
end)

print("é€Ÿåº¦è·³èºæ§åˆ¶å™¨å·²è¼‰å…¥!")
print("è·³èºç³»çµ±:", player.Character and player.Character:FindFirstChildOfClass("Humanoid") and (player.Character:FindFirstChildOfClass("Humanoid").UseJumpPower and "JumpPower" or "JumpHeight") or "æœªçŸ¥")
